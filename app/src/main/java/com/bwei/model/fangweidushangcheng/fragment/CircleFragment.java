package com.bwei.model.fangweidushangcheng.fragment;import android.os.Bundle;import android.support.annotation.NonNull;import android.support.annotation.Nullable;import android.support.v4.app.Fragment;import android.support.v7.widget.LinearLayoutManager;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import com.bwei.model.fangweidushangcheng.Adapter.CiricleRecyclerAdapter;import com.bwei.model.fangweidushangcheng.R;import com.bwei.model.fangweidushangcheng.Util.ToasUtil;import com.bwei.model.fangweidushangcheng.bean.CircleBean;import com.bwei.model.fangweidushangcheng.mvp.presenter.Ciriclepresenter;import com.bwei.model.fangweidushangcheng.mvp.view.CiricleView;import com.jcodecraeer.xrecyclerview.XRecyclerView;import java.util.List;import butterknife.BindView;import butterknife.ButterKnife;import butterknife.OnClick;import butterknife.Unbinder;/** * date:2018/12/4 * author:郝仁（Thinkpad) * function: */public class CircleFragment extends Fragment implements CiricleView{    @BindView(R.id.circleone_recycler)    XRecyclerView circleoneRecycler;    Unbinder unbinder;    private Ciriclepresenter mCiriclepresenter;    private int curr = 1;    private CiricleRecyclerAdapter mAdapter;    private boolean isLoadMore;    @Nullable    @Override    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {        View view = inflater.inflate( R.layout.fragment_circle, container, false );        unbinder = ButterKnife.bind( this, view );        return view;    }    @Override    public void onActivityCreated(@Nullable Bundle savedInstanceState) {        super.onActivityCreated( savedInstanceState );        LinearLayoutManager manager = new LinearLayoutManager( getContext() );        manager.setOrientation( LinearLayoutManager.VERTICAL);        circleoneRecycler.setLayoutManager( manager );        mCiriclepresenter = new Ciriclepresenter(this);        mCiriclepresenter.ciricle(curr+"","5");       circleoneRecycler.setLoadingMoreEnabled( true );       circleoneRecycler.setPullRefreshEnabled( true );       circleoneRecycler.setLoadingListener( new XRecyclerView.LoadingListener() {           @Override           public void onRefresh() {                   curr = 1;                mCiriclepresenter.ciricle(""+curr,"5");                circleoneRecycler.refreshComplete();           }           @Override           public void onLoadMore() {                curr++;                mCiriclepresenter.ciricle(""+curr,"5");                circleoneRecycler.refreshComplete();           }       } );    }    @Override    public void onDestroyView() {        super.onDestroyView();        unbinder.unbind();    }    @OnClick(R.id.circleone_recycler)    public void onViewClicked() {    }    @Override    public void cririSuccess(List success) {        if (mAdapter == null){            mAdapter = new CiricleRecyclerAdapter( getContext(), success );            circleoneRecycler.setAdapter( mAdapter );        }        if (isLoadMore){            mAdapter.setList( success );        }else {            mAdapter.addList( success );        }            mAdapter.notifyDataSetChanged();    }    @Override    public void cririFail(String fail) {        ToasUtil.showToas( fail );    }}